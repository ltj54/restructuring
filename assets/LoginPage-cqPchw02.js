import{b as f,r as c,u as x,i as h,g as b,j as e,L as g}from"./index-Cmmb0GeE.js";import{u as k,t as j,F as v,T as p}from"./types-BP40N_3a.js";import{C as w}from"./Card-0ce4mDTe.js";import{B as y}from"./Button-DJLBmBW8.js";import{l as L}from"./authSchemas-BK_hke1i.js";function S(){var u;const n=f(),s=c.useMemo(()=>{var o;return(o=n.state)==null?void 0:o.from},[(u=n.state)==null?void 0:u.from]),{login:a,isAuthenticating:d}=x(),[l,r]=c.useState(null),t=k({resolver:j(L),defaultValues:{email:"",password:""},mode:"onTouched"}),m=c.useMemo(()=>t.handleSubmit(async o=>{r(null);try{await a({email:o.email,password:o.password},{redirectTo:s||void 0})}catch(i){if(h(i)){if(i.status===401){r({variant:"error",message:"Ugyldig e-post eller passord."});return}if(i.status===404){r({variant:"error",message:"Brukeren finnes ikke.",action:{type:"link",to:"/register",label:"Registrer deg her."}});return}if(i.status>=500){r({variant:"error",message:"Det oppstod en teknisk feil. Pr√∏v igjen senere."});return}}r({variant:"error",message:b(i,"Innlogging feilet.")})}}),[t,a,s]);return{form:t,feedback:l,isSubmitting:d,onSubmit:m}}function C(){var t,m;const{form:n,feedback:s,isSubmitting:a,onSubmit:d}=S(),{register:l,formState:{errors:r}}=n;return e.jsx("div",{className:"w-full max-w-md mx-auto px-4 py-10",children:e.jsxs(w,{title:"Logg inn",children:[s&&e.jsx(v,{variant:s.variant,message:s.message,action:s.action}),e.jsxs("form",{onSubmit:d,className:"flex flex-col gap-5 mt-4",children:[e.jsx(p,{type:"email",label:"E-post",placeholder:"E-post",autoComplete:"email",error:(t=r.email)==null?void 0:t.message,...l("email")}),e.jsx(p,{type:"password",label:"Passord",placeholder:"Passord",autoComplete:"current-password",error:(m=r.password)==null?void 0:m.message,...l("password")}),e.jsx(y,{type:"submit",disabled:a,children:a?"Logger inn...":"Logg inn"}),e.jsx("div",{className:"text-center",children:e.jsx(g,{to:"/forgot-password",className:"text-sm text-slate-600 hover:text-brand-dark hover:underline",children:"Glemt passord?"})})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-slate-600",children:["Har du ikke konto?"," ",e.jsx(g,{to:"/register",className:"text-brand-dark font-medium hover:underline",children:"Registrer deg her"}),"."]})]})})}export{C as default};
