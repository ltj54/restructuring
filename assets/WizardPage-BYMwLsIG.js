import{c as j,u as y,r,j as e,f as N}from"./index-DY5-8eit.js";import{C as g}from"./Card-CSTHicjx.js";import{B as o}from"./Button-CslG25di.js";import{P as S}from"./PageLayout-BiITw9I-.js";const n={it:"IT",industri:"Industri",helse:"Helse og omsorg",flyger:"Flyger / luftfart",butikk:"Butikk og varehandel",kontor:"Kontor og administrasjon",transport:"Transport og logistikk",salg:"Salg og kundeservice",annet:"Annet"},P={it:"Outsourcing og oppdatering av kompetanse.",industri:"Nedbemanning og faglig viderevei.",helse:"Omorganisering og autorisasjon.",flyger:"Lisens, helsekrav og omplassering.",butikk:"Arbeidstid, kontrakt og videre karriere.",kontor:"Digitalisering og nye roller.",transport:"Sertifikater, skift og rettigheter.",salg:"Kundeansvar, mål og videre muligheter.",annet:"Generelle råd om avtaler og CV."};function L(){const c=j(),{isAuthenticated:m}=y(),[a,i]=r.useState(null),[p,u]=r.useState("Før omstilling"),[h,x]=r.useState([]),[d,l]=r.useState(null);r.useEffect(()=>{const t=localStorage.getItem("myPlan");if(t)try{const s=JSON.parse(t);if(s.persona){const k=(Object.entries(n).find(([,v])=>v===s.persona)??[null])[0];i(k)}s.phase&&u(s.phase),s.needs&&x(s.needs)}catch{}},[]);const f=r.useMemo(()=>a?n[a]:"Ikke valgt",[a]),b=async()=>{if(l(null),!a){l("Velg en rolle/persona for å fortsette.");return}const t={persona:n[a],phase:p,needs:h};if(localStorage.setItem("myPlan",JSON.stringify(t)),localStorage.setItem("personaLabel",n[a]),m)try{await N("/plan/me",{method:"PUT",body:{persona:t.persona,phase:t.phase,needs:t.needs}}),l("Planen er lagret på brukeren din.")}catch{l("Kunne ikke lagre hos serveren, men planen er lagret lokalt.")}else l("Planen er lagret lokalt.");c(`/plan?phase=${encodeURIComponent(t.phase??"")}`)};return e.jsx(S,{title:"Veiviser",subtitle:"Velg rolle - vi bygger planen din.",maxWidthClassName:"max-w-5xl",actions:e.jsx(o,{to:"/plan",className:"bg-white text-emerald-700 border-emerald-200 hover:bg-emerald-50 font-semibold",children:"Gå til plan"}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{title:"Velg situasjonen din",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(n).map(t=>{const s=a===t;return e.jsxs("button",{type:"button",onClick:()=>i(t),className:`rounded-xl border px-4 py-4 text-left transition ${s?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white hover:border-slate-400"}`,children:[e.jsx("div",{className:"font-semibold text-sm",children:n[t]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600 opacity-90",children:P[t]})]},t)})})}),e.jsxs(g,{title:"Oppsummering",children:[e.jsxs("p",{className:"text-sm text-slate-700 mb-3",children:[e.jsx("strong",{children:"Rolle:"})," ",f]}),d&&e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:d}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx(o,{onClick:b,children:"Lagre og gå til plan"}),e.jsx(o,{to:"/",className:"border-slate-200 text-slate-700 hover:bg-slate-50",children:"Tilbake til start"})]})]})]})})}export{L as default};
