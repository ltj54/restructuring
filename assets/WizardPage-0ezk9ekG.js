import{c as y,u as S,r as l,j as e,f as P}from"./index-BHhJI5KT.js";import{C as g}from"./Card-CPJa0U6w.js";import{B as c}from"./Button-DPtfrP6g.js";import{P as V}from"./PageLayout-DeuinnMT.js";const w={it:["Sjekk plikter/kontrakt ved outsourcing (inkl. personvern).","Oppdater CV (cloud/DevOps/security) og aktiver nettverk.","Vurder konsulentløp eller sertifisering (AWS/Azure)."],flyger:["Sjekk regelverk for lisens/helse og klagemuligheter.","Avklar omplassering/overgangsstøtte via arbeidsgiver/NAV.","Kartlegg overførbare ferdigheter: sikkerhet, prosedyrer, operativ ledelse."],helse:["Rettigheter ved omorganisering/turnusendring og etter- og videreutdanning.","Dokumenter autorisasjon/kurs og interne karriereløp.","Hold oversikt over arbeidsmiljø og HMS-regelverk."],industri:["Sjekk oppsigelsesvern og krav på sluttpakke ved nedbemanning.","Vurder fagskole eller teknisk etterutdanning.","NAV tilbyr kurs for teknisk drift, logistikk og industriroller."],annet:["Sjekk arbeidskontrakt, lønnskrav og eventuell sluttavtale.","Skriv CV og profiltekst som viser overførbare ferdigheter.","Utforsk NAVs karriereveiledning og støtteordninger."]},a={it:"IT",industri:"Industri",helse:"Helse",flyger:"Flyger",annet:"Annet"},C=["Få oversikt over rettigheter og avtaler","Forstå hva omstillingen betyr for lønn og økonomi","Planlegge neste karrieresteg","Snakke med noen om situasjonen","Få kontroll på forsikringer og inntektssikring"],x=["Før omstilling","Under omstilling","Etter omstilling"];function E(){const k=y(),{isAuthenticated:v}=S(),[r,m]=l.useState(null),[d,p]=l.useState(x[0]),[o,h]=l.useState([]),[u,i]=l.useState(null);l.useEffect(()=>{const s=localStorage.getItem("myPlan");if(s)try{const t=JSON.parse(s);if(t.persona){const n=(Object.entries(a).find(([,N])=>N===t.persona)??[null])[0];m(n)}t.phase&&p(t.phase),t.needs&&h(t.needs)}catch{}},[]);const b=l.useMemo(()=>r?a[r]:"Ikke valgt",[r]),f=s=>{h(t=>t.includes(s)?t.filter(n=>n!==s):[...t,s])},j=async()=>{if(i(null),!r){i("Velg en rolle/persona for å fortsette.");return}const s={persona:a[r],phase:d,needs:o};if(localStorage.setItem("myPlan",JSON.stringify(s)),localStorage.setItem("personaLabel",a[r]),v)try{await P("/plan/me",{method:"PUT",body:{persona:s.persona,phase:s.phase,needs:s.needs}}),i("Planen er lagret på brukeren din.")}catch{i("Kunne ikke lagre planen hos serveren, men den er lagret lokalt.")}else i("Planen er lagret lokalt for denne nettleseren.");k(`/plan?phase=${encodeURIComponent(s.phase??"")}`)};return e.jsx(V,{title:"Veiviser",subtitle:"Velg rolle, fase og behov – så bygger vi planen din.",maxWidthClassName:"max-w-5xl",actions:e.jsx(c,{to:"/plan",className:"bg-white text-emerald-700 border-emerald-200 hover:bg-emerald-50 font-semibold",children:"Gå til plan"}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{title:"Velg situasjonen din",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(a).map(s=>{const t=r===s;return e.jsxs("button",{type:"button",onClick:()=>m(s),className:`rounded-xl border px-3 py-3 text-left text-sm transition ${t?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white hover:border-slate-400"}`,children:[e.jsx("div",{className:"font-semibold",children:a[s]}),e.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-600 list-disc list-inside",children:w[s].slice(0,2).map(n=>e.jsx("li",{children:n},n))})]},s)})})}),e.jsx(g,{title:"Velg fase og behov",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Fase"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(s=>{const t=d===s;return e.jsx("button",{type:"button",onClick:()=>p(s),className:`px-3 py-2 rounded-full text-xs border ${t?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700"}`,children:s},s)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Hva trenger du nå?"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:C.map(s=>{const t=o.includes(s);return e.jsxs("label",{className:`cursor-pointer rounded-lg border px-3 py-2 text-sm transition ${t?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:t,onChange:()=>f(s)}),s]},s)})})]})]})}),e.jsxs(g,{title:"Oppsummering",children:[e.jsxs("p",{className:"text-sm text-slate-700 mb-3",children:[e.jsx("strong",{children:"Persona:"})," ",b," ",e.jsx("br",{}),e.jsx("strong",{children:"Fase:"})," ",d," ",e.jsx("br",{}),e.jsx("strong",{children:"Behov:"})," ",o.length>0?o.join(", "):"Ingen valgt ennå"]}),u&&e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:u}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx(c,{onClick:j,children:"Lagre og gå til plan"}),e.jsx(c,{to:"/",className:"border-slate-200 text-slate-700 hover:bg-slate-50",children:"Tilbake til start"})]})]})]})})}export{E as default};
