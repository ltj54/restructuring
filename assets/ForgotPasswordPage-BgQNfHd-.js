import{r as l,a as d,g as c,j as s,L as u}from"./index-BHhJI5KT.js";import{u as f,t as g,F as p,T as x}from"./types-B7pUikB3.js";import{C as b}from"./Card-CPJa0U6w.js";import{B as h}from"./Button-DPtfrP6g.js";import{f as k}from"./authSchemas-BGOQ-NMa.js";import{P as S}from"./PageLayout-DeuinnMT.js";function j(){const[n,e]=l.useState(null),[a,o]=l.useState(!1),t=f({resolver:g(k),defaultValues:{email:""},mode:"onTouched"}),i=l.useMemo(()=>t.handleSubmit(async r=>{e(null),o(!0);try{(await fetch(`${d}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(e({variant:"success",message:"Dersom adressen finnes i systemet, er det sendt en lenke for å tilbakestille passordet."}),t.reset({email:r.email})):e({variant:"error",message:"Kunne ikke sende e-post. Prøv igjen senere."})}catch(m){e({variant:"error",message:c(m,"Ingen kontakt med serveren.")})}finally{o(!1)}}),[t]);return{form:t,feedback:n,isSubmitting:a,onSubmit:i}}function C(){var r;const{form:n,feedback:e,isSubmitting:a,onSubmit:o}=j(),{register:t,formState:{errors:i}}=n;return s.jsx(S,{title:"Glemt passord",subtitle:"Vi sender deg en lenke for å velge nytt passord.",maxWidthClassName:"max-w-xl",children:s.jsxs(b,{children:[e&&s.jsx(p,{variant:e.variant,message:e.message,action:e.action}),s.jsxs("form",{onSubmit:o,className:"flex flex-col gap-5",children:[s.jsx(x,{type:"email",label:"Din e-postadresse",placeholder:"Din e-postadresse",autoComplete:"email",error:(r=i.email)==null?void 0:r.message,...t("email")}),s.jsx(h,{type:"submit",disabled:a,children:a?"Sender.":"Send tilbakestillingslenke"})]}),s.jsx("p",{className:"mt-6 text-center text-sm text-slate-600",children:s.jsx(u,{to:"/login",className:"text-brand-dark font-medium hover:underline",children:"Tilbake til innlogging"})})]})})}export{C as default};
