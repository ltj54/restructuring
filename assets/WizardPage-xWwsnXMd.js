import{c as N,u as y,r as l,j as s,f as S}from"./index-Cmmb0GeE.js";import{C as g}from"./Card-0ce4mDTe.js";import{B as P}from"./Button-DJLBmBW8.js";const w={it:["Sjekk plikter/kontrakt ved outsourcing (inkl. personvern).","Oppdater CV (cloud/DevOps/security) og aktiver nettverk.","Vurder konsulentløp eller sertifisering (AWS/Azure)."],flyger:["Sjekk regelverk for lisens/helse og klagemuligheter.","Avklar omplassering/overgangsstøtte via arbeidsgiver/NAV.","Kartlegg overførbare ferdigheter: sikkerhet, prosedyrer, operativ ledelse."],helse:["Rettigheter ved omorganisering/turnusendring og etter- og videreutdanning.","Dokumenter autorisasjon/kurs og interne karriereløp.","Hold oversikt over arbeidsmiljø og HMS-regelverk."],industri:["Sjekk oppsigelsesvern og krav på sluttpakke ved nedbemanning.","Vurder fagskole eller teknisk etterutdanning.","NAV tilbyr kurs for teknisk drift, logistikk og industriroller."],annet:["Sjekk arbeidskontrakt, lønnskrav og eventuell sluttavtale.","Skriv CV og profiltekst som viser overførbare ferdigheter.","Utforsk NAVs karriereveiledning og støtteordninger."]},a={it:"IT",industri:"Industri",helse:"Helse",flyger:"Flyger",annet:"Annet"},O=["Få oversikt over rettigheter og avtaler","Forstå hva omstillingen betyr for lønn og økonomi","Planlegge neste karrieresteg","Snakke med noen om situasjonen","Få kontroll på forsikringer og inntektssikring"],h=["Før omstilling","Under omstilling","Etter omstilling"];function I(){const k=N(),{isAuthenticated:x}=y(),[r,c]=l.useState(null),[d,p]=l.useState(h[0]),[o,m]=l.useState([]),[u,i]=l.useState(null);l.useEffect(()=>{const e=localStorage.getItem("myPlan");if(e)try{const t=JSON.parse(e);if(t.persona){const n=(Object.entries(a).find(([,j])=>j===t.persona)??[null])[0];c(n)}t.phase&&p(t.phase),t.needs&&m(t.needs)}catch{}},[]);const v=l.useMemo(()=>r?a[r]:"Ikke valgt",[r]),f=e=>{m(t=>t.includes(e)?t.filter(n=>n!==e):[...t,e])},b=async()=>{if(i(null),!r){i("Velg en rolle/persona for å fortsette.");return}const e={persona:a[r],phase:d,needs:o};if(localStorage.setItem("myPlan",JSON.stringify(e)),localStorage.setItem("personaLabel",a[r]),x)try{await S("/plan/me",{method:"PUT",body:{persona:e.persona,phase:e.phase,needs:e.needs}}),i("Planen er lagret på brukeren din.")}catch{i("Kunne ikke lagre planen hos serveren, men den er lagret lokalt.")}else i("Planen er lagret lokalt for denne nettleseren.");k(`/plan?phase=${encodeURIComponent(e.phase??"")}`)};return s.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 py-8 space-y-6",children:[s.jsx(g,{title:"Velg situasjonen din",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(a).map(e=>{const t=r===e;return s.jsxs("button",{type:"button",onClick:()=>c(e),className:`rounded-xl border px-3 py-2 text-left text-sm transition ${t?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white hover:border-slate-400"}`,children:[s.jsx("div",{className:"font-semibold",children:a[e]}),s.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-600",children:w[e].slice(0,2).map(n=>s.jsxs("li",{children:["• ",n]},n))})]},e)})})}),s.jsx(g,{title:"Velg fase og behov",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-2",children:"Fase"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(e=>{const t=d===e;return s.jsx("button",{type:"button",onClick:()=>p(e),className:`px-3 py-2 rounded-full text-xs border ${t?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700"}`,children:e},e)})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold mb-2",children:"Hva trenger du nå?"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:O.map(e=>{const t=o.includes(e);return s.jsxs("label",{className:`cursor-pointer rounded-lg border px-3 py-2 text-sm transition ${t?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white"}`,children:[s.jsx("input",{type:"checkbox",className:"hidden",checked:t,onChange:()=>f(e)}),e]},e)})})]})]})}),s.jsxs(g,{title:"Oppsummering",children:[s.jsxs("p",{className:"text-sm text-slate-700 mb-3",children:[s.jsx("strong",{children:"Persona:"})," ",v," ",s.jsx("br",{}),s.jsx("strong",{children:"Fase:"})," ",d," ",s.jsx("br",{}),s.jsx("strong",{children:"Behov:"})," ",o.length>0?o.join(", "):"Ingen valgt ennå"]}),u&&s.jsx("p",{className:"text-sm text-slate-600 mb-3",children:u}),s.jsx("div",{className:"flex gap-3",children:s.jsx(P,{onClick:b,children:"Lagre og gå til plan"})})]})]})}export{I as default};
