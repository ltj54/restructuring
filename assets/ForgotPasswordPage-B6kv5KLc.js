import{r as i,b as d,g as c,j as s,L as u}from"./index-BVVrAzlo.js";import{u as f,t as g,F as p,T as x}from"./types-Dj17ZYS3.js";import{C as b}from"./Card-c8NqY-G7.js";import{B as h}from"./Button-UvbmjkVq.js";import{f as k}from"./authSchemas-NTkf77mk.js";import{P as S}from"./PageLayout-DNITwTV4.js";function j(){const[o,e]=i.useState(null),[r,a]=i.useState(!1),t=f({resolver:g(k),defaultValues:{email:""},mode:"onTouched"}),n=i.useMemo(()=>t.handleSubmit(async l=>{e(null),a(!0);try{(await fetch(`${d}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?(e({variant:"success",message:"Dersom adressen finnes i systemet, er det sendt en lenke for å tilbakestille passordet."}),t.reset({email:l.email})):e({variant:"error",message:"Kunne ikke sende e-post. Prøv igjen senere."})}catch(m){e({variant:"error",message:c(m,"Ingen kontakt med serveren.")})}finally{a(!1)}}),[t]);return{form:t,feedback:o,isSubmitting:r,onSubmit:n}}function C(){const{form:o,feedback:e,isSubmitting:r,onSubmit:a}=j(),{register:t,formState:{errors:n}}=o;return s.jsx(S,{title:"Glemt passord",subtitle:"Vi sender deg en lenke for å velge nytt passord.",maxWidthClassName:"max-w-xl",children:s.jsxs(b,{children:[e&&s.jsx(p,{variant:e.variant,message:e.message,action:e.action}),s.jsxs("form",{onSubmit:a,className:"flex flex-col gap-5",children:[s.jsx(x,{type:"email",label:"Din e-postadresse",placeholder:"Din e-postadresse",autoComplete:"email",error:n.email?.message,...t("email")}),s.jsx(h,{type:"submit",disabled:r,children:r?"Sender.":"Send tilbakestillingslenke"})]}),s.jsx("p",{className:"mt-6 text-center text-sm text-slate-600",children:s.jsx(u,{to:"/login",className:"text-brand-dark font-medium hover:underline",children:"Tilbake til innlogging"})})]})})}export{C as default};
