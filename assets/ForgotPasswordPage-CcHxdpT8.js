import{r as l,a as d,g as c,j as s,L as u}from"./index-CKMgu8cZ.js";import{u as f,t as g,F as p,T as x}from"./types-G_kP4QRs.js";import{C as b}from"./Card-oOArJDDQ.js";import{B as h}from"./Button-B3TmYlrb.js";import{f as k}from"./authSchemas-CtNA_yAS.js";function S(){const[n,e]=l.useState(null),[r,o]=l.useState(!1),t=f({resolver:g(k),defaultValues:{email:""},mode:"onTouched"}),i=l.useMemo(()=>t.handleSubmit(async a=>{e(null),o(!0);try{(await fetch(`${d}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(e({variant:"success",message:"Dersom adressen finnes i systemet, er det sendt en lenke for å tilbakestille passordet."}),t.reset({email:a.email})):e({variant:"error",message:"Kunne ikke sende e-post. Prøv igjen senere."})}catch(m){e({variant:"error",message:c(m,"Ingen kontakt med serveren.")})}finally{o(!1)}}),[t]);return{form:t,feedback:n,isSubmitting:r,onSubmit:i}}function P(){var a;const{form:n,feedback:e,isSubmitting:r,onSubmit:o}=S(),{register:t,formState:{errors:i}}=n;return s.jsx("div",{className:"w-full max-w-md mx-auto px-4 py-10",children:s.jsxs(b,{title:"Glemt passord",children:[e&&s.jsx(p,{variant:e.variant,message:e.message,action:e.action}),s.jsxs("form",{onSubmit:o,className:"flex flex-col gap-5",children:[s.jsx(x,{type:"email",label:"Din e-postadresse",placeholder:"Din e-postadresse",autoComplete:"email",error:(a=i.email)==null?void 0:a.message,...t("email")}),s.jsx(h,{type:"submit",disabled:r,children:r?"Sender.":"Send tilbakestillingslenke"})]}),s.jsx("p",{className:"mt-6 text-center text-sm text-slate-600",children:s.jsx(u,{to:"/login",className:"text-brand-dark font-medium hover:underline",children:"Tilbake til innlogging"})})]})})}export{P as default};
