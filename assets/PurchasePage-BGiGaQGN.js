import{r as l,j as e,L as c,a as m,g as u}from"./index--nfCX7zW.js";import{C as f}from"./Card-B-hZcLtq.js";import{B as x}from"./Button-CmiXXl1s.js";import{P as h}from"./PageLayout-BriDG69y.js";function E(){const[r,s]=l.useState(null),[n,a]=l.useState(null),o=localStorage.getItem("token");return l.useEffect(()=>{let i=!0;return(async()=>{if(!o){a("Du må være innlogget for å se tilbudet."),s(null);return}try{const t=await fetch(`${m}/private/offer`,{headers:{Authorization:`Bearer ${o}`}});if(!t.ok)throw new Error(`HTTP ${t.status}`);const d=await t.json();i&&(s(d),a(null))}catch(t){i&&(s(null),a(u(t,"Kunne ikke hente tilbud.")))}})(),()=>{i=!1}},[o]),e.jsx(h,{title:"Ditt forsikringstilbud",subtitle:"Se pris og dekning basert på planen din.",maxWidthClassName:"max-w-3xl",actions:e.jsx(x,{to:"/plan",className:"bg-white text-emerald-700 border-emerald-200 hover:bg-emerald-50 font-semibold",children:"Tilbake til plan"}),children:e.jsxs(f,{children:[n&&e.jsx("p",{className:"mb-4 text-sm text-red-600",children:n}),r?e.jsxs("div",{className:"border rounded-xl p-4 bg-slate-50 text-sm space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Pris per måned:"})," ",r.price," kr"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dekning:"})," ",r.coverage]}),e.jsx(c,{to:"/insurance",className:"text-sm text-emerald-700 font-semibold hover:underline",children:"Se detaljer om dekning"})]}):!n&&e.jsx("p",{className:"text-sm text-slate-600",children:"Henter tilbud."})]})})}export{E as default};
