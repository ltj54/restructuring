import{c as y,u as S,r,j as e,f as P}from"./index-DVII_wd_.js";import{C as c}from"./Card-BgmPGXPt.js";import{B as g}from"./Button-BtJx2cJ-.js";import{P as w}from"./PageLayout-v8A4s_Np.js";const n={it:"IT",industri:"Industri",helse:"Helse og omsorg",flyger:"Flyger / luftfart",butikk:"Butikk og varehandel",kontor:"Kontor og administrasjon",transport:"Transport og logistikk",salg:"Salg og kundeservice",annet:"Annet"},O={it:"Outsourcing og oppdatering av kompetanse.",industri:"Nedbemanning og faglig viderevei.",helse:"Omorganisering og autorisasjon.",flyger:"Lisens, helsekrav og omplassering.",butikk:"Arbeidstid, kontrakt og videre karriere.",kontor:"Digitalisering og nye roller.",transport:"Sertifikater, skift og rettigheter.",salg:"Kundeansvar, mål og videre muligheter.",annet:"Generelle råd om avtaler og CV."},C=["Få oversikt over rettigheter og avtaler","Forstå hva omstillingen betyr for lønn og økonomi","Planlegge neste karrieresteg","Snakke med noen om situasjonen","Få kontroll på forsikringer og inntektssikring"],u=["Før omstilling","Under omstilling","Etter omstilling"];function L(){const b=y(),{isAuthenticated:v}=S(),[a,m]=r.useState(null),[i,h]=r.useState(u[0]),[o,p]=r.useState([]),[x,l]=r.useState(null);r.useEffect(()=>{const s=localStorage.getItem("myPlan");if(s)try{const t=JSON.parse(s);if(t.persona){const d=(Object.entries(n).find(([,N])=>N===t.persona)??[null])[0];m(d)}t.phase&&h(t.phase),t.needs&&p(t.needs)}catch{}},[]);const f=r.useMemo(()=>a?n[a]:"Ikke valgt",[a]),j=s=>{p(t=>t.includes(s)?t.filter(d=>d!==s):[...t,s])},k=async()=>{if(l(null),!a){l("Velg en rolle/persona for å fortsette.");return}const s={persona:n[a],phase:i,needs:o};if(localStorage.setItem("myPlan",JSON.stringify(s)),localStorage.setItem("personaLabel",n[a]),v)try{await P("/plan/me",{method:"PUT",body:{persona:s.persona,phase:s.phase,needs:s.needs}}),l("Planen er lagret på brukeren din.")}catch{l("Kunne ikke lagre hos serveren, men planen er lagret lokalt.")}else l("Planen er lagret lokalt.");b(`/plan?phase=${encodeURIComponent(s.phase??"")}`)};return e.jsx(w,{title:"Veiviser",subtitle:"Velg rolle, fase og behov – så bygger vi planen din.",maxWidthClassName:"max-w-5xl",actions:e.jsx(g,{to:"/plan",className:"bg-white text-emerald-700 border-emerald-200 hover:bg-emerald-50 font-semibold",children:"Gå til plan"}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{title:"Velg situasjonen din",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(n).map(s=>{const t=a===s;return e.jsxs("button",{type:"button",onClick:()=>m(s),className:`rounded-xl border px-4 py-4 text-left transition ${t?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white hover:border-slate-400"}`,children:[e.jsx("div",{className:"font-semibold text-sm",children:n[s]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600 opacity-90",children:O[s]})]},s)})})}),e.jsx(c,{title:"Velg fase og behov",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Fase"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(s=>{const t=i===s;return e.jsx("button",{type:"button",onClick:()=>h(s),className:`px-3 py-2 rounded-full text-xs border ${t?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700"}`,children:s},s)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Hva trenger du nå?"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:C.map(s=>{const t=o.includes(s);return e.jsxs("label",{className:`cursor-pointer rounded-lg border px-3 py-2 text-sm transition ${t?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:t,onChange:()=>j(s)}),s]},s)})})]})]})}),e.jsxs(c,{title:"Oppsummering",children:[e.jsxs("p",{className:"text-sm text-slate-700 mb-3",children:[e.jsx("strong",{children:"Rolle:"})," ",f," ",e.jsx("br",{}),e.jsx("strong",{children:"Fase:"})," ",i," ",e.jsx("br",{}),e.jsx("strong",{children:"Behov:"})," ",o.length>0?o.join(", "):"Ingen valgt ennå"]}),x&&e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:x}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx(g,{onClick:k,children:"Lagre og gå til plan"}),e.jsx(g,{to:"/",className:"border-slate-200 text-slate-700 hover:bg-slate-50",children:"Tilbake til start"})]})]})]})})}export{L as default};
