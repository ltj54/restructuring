import{a as L,u as H,r as n,f as x,j as t,L as A}from"./index-BVVrAzlo.js";import{C as B}from"./Card-c8NqY-G7.js";import{B as k}from"./Button-UvbmjkVq.js";import{P as C}from"./PageLayout-DNITwTV4.js";const f={"Før omstilling":{title:"Før omstilling – bygg trygghet tidlig",description:"Du er i en tidlig fase. Målet nå er å skaffe oversikt og forberede deg uten unødig stress.",bullets:["Skriv ned hva som bekymrer deg konkret – ikke bare «omstilling generelt».","Finn ut hvem som faktisk vet hva (leder, HR, tillitsvalgt).","Sjekk hvilke forsikringer og ordninger du allerede har."],diaryTitle:"Dagbok – før omstilling",diaryDescription:"Skriv ned bekymringer, spørsmål og hva du bør sjekke tidlig.",diaryPlaceholder:"Hva lurer du på nå? Hva trenger du svar på? Hva bekymrer deg?",actions:["Lag liste over hva du vet – og hva du ikke vet.","Ta kontakt med leder eller HR for avklaringer.","Kartlegg dine forsikringer og økonomi.","Begynn stille med oppdatering av CV."]},"Under omstilling":{title:"Under omstilling – ta kontroll på endringene",description:"Endringene er i gang. Her handler planen om å beholde oversikt og bruke rettighetene dine aktivt.",bullets:["Sørg for skriftlig informasjon om forslagene som gjelder deg.","Be om et konkret møte om din rolle og dine alternativer.","Lag et regneark med «nå» og «etter omstilling» for lønn og arbeidstid."],diaryTitle:"Dagbok – under omstilling",diaryDescription:"Skriv ned punkter fra møter, frister og ting du må følge opp.",diaryPlaceholder:"Hva ble sagt i møtet? Hva må du følge opp? Hvilke frister kom opp?",actions:["Be om alt skriftlig.","Lag oversikt over konsekvenser (lønn, arbeidstid, arbeidsoppgaver).","Book rådgiving (tillitsvalgt/HR).","Loggfør alle møter i dagboken."]},"Etter omstilling":{title:"Etter omstilling – juster økonomi og kurs",description:"Omstillingen er gjennomført. Nå handler det om økonomi, karriere og neste steg.",bullets:["Oppdater budsjett basert på ny inntekt og arbeidstid.","Lag en 3-måneders plan for kompetanse, CV og søknader.","Vurder behov for ekstra inntektssikring."],diaryTitle:"Dagbok – etter omstilling",diaryDescription:"Bruk notater til å planlegge neste steg: karriere, økonomi og mål.",diaryPlaceholder:"Hva er neste steg? Hvilke jobber vurderer du? Hva er målene dine?",actions:["Oppdater budsjett.","Planlegg kurs eller kompetanseheving.","Søk på jobber eller interne muligheter.","Lag en 3-måneders utviklingsplan."]}};function U(){const v=L(),{isAuthenticated:l}=H(),o=new URLSearchParams(v.search).get("phase")??"",[d,y]=n.useState(null),[m,c]=n.useState({}),[r,h]=n.useState(""),[j,g]=n.useState(!1),[N,u]=n.useState(!1),[p,b]=n.useState(null),P=r||d?.fase||o||"Før omstilling",s=f[P];n.useEffect(()=>{l&&(g(!0),(async()=>{try{const e=await x("/plan/me");if(!e){g(!1);return}const a=e.phase?{persona:e.persona??"Annet",fase:e.phase,behov:e.needs??[],createdAt:e.createdAt??new Date().toISOString()}:null;y(a);const i={...e.diaries};if(e.phase&&e.diary&&!i[e.phase]&&(i[e.phase]=e.diary),c(i),!r){const D=o||e.phase||"Før omstilling";h(D)}}catch{}finally{g(!1)}})())},[l,r,o]);const S=e=>{const a=e.target.value;b(null),r&&(c(i=>({...i,[r]:a})),l&&(u(!0),(async()=>{try{await x("/plan/me",{method:"PUT",body:{persona:d?.persona??"Annet",phase:r,needs:d?.behov??[],diary:a}})}catch{b("Kunne ikke lagre endringen nå.")}finally{u(!1)}})()))},w=t.jsxs(t.Fragment,{children:[t.jsx(k,{to:"/wizard",className:"bg-gradient-to-r from-emerald-400 to-teal-500 text-slate-900 border-transparent font-semibold",children:"Start veiviseren"}),t.jsx(k,{to:"/resources",className:"bg-white text-emerald-700 border-emerald-200 hover:bg-emerald-50 font-semibold",children:"Se ressurser"})]});return t.jsx(C,{title:"Min plan",subtitle:"Fire steg som gir deg oversikt: fase, økonomi, kompetanse og konkrete handlinger.",actions:w,maxWidthClassName:"max-w-5xl",children:t.jsxs(B,{children:[j&&t.jsx("p",{className:"mb-3 text-xs text-slate-500",children:"Laster plan ..."}),t.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 text-sm",children:[t.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 mb-1",children:s.title}),t.jsx("p",{className:"text-sm text-slate-700 mb-3",children:s.description}),t.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-700",children:s.bullets.map(e=>t.jsx("li",{children:e},e))})]}),t.jsxs("section",{className:"mt-6 rounded-2xl border border-slate-200 bg-white p-4 text-sm",children:[t.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900",children:s.diaryTitle}),t.jsx("p",{className:"text-xs text-slate-600 mb-3",children:s.diaryDescription}),t.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:Object.keys(f).map(e=>{const a=r===e,i=!!m[e]?.trim();return t.jsxs("button",{type:"button",onClick:()=>h(e),className:`px-3 py-1 rounded-full text-xs border flex items-center gap-1 ${a?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-700 border-slate-300"}`,children:[t.jsx("span",{children:e}),i&&t.jsx("span",{"aria-hidden":"true",className:`inline-block w-1.5 h-1.5 rounded-full ${a?"bg-white/90":"bg-emerald-500"}`})]},e)})}),t.jsx("textarea",{value:r&&m[r]||"",onChange:S,rows:8,className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-200 resize-y",placeholder:s.diaryPlaceholder}),N&&t.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Lagrer ..."}),p&&t.jsx("p",{className:"mt-1 text-xs text-red-500",children:p})]}),t.jsx("h2",{className:"mt-6 text-lg font-semibold text-slate-900",children:"Handlinger (14 dager)"}),t.jsx("ul",{className:"mt-3 space-y-2",children:s.actions.map(e=>t.jsx("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-sm",children:e},e))}),t.jsx("div",{className:"mt-6",children:t.jsx(A,{to:"/resources",className:"block rounded-xl border border-slate-200 bg-white py-3 text-center text-sm font-semibold hover:bg-slate-50",children:"Ressurser"})})]})})}export{U as default};
